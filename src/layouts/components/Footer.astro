---
import clsx from 'clsx';
import SocialLinks from '~/shared/components/SocialLinks.astro';

import { navLinks } from '../../../site.json';

const pathname = new URL(Astro.request.url).pathname;
---

<style lang="scss">
	@use 'src/styles/utils';
	.footer {
		&__container {
			@include utils.center-horizontally;

			display: flex;
			flex-direction: column;
			align-items: center;
			padding: var(--size-4) 0;
			border-top: var(--border-size-1) solid var(--brand-dimmed);

			&--navLinks {
				display: flex;
				align-items: center;
				justify-content: center;
				gap: var(--size-6);
				width: 100%;
				font-size: var(--font-size-0);
				padding: var(--size-2) 0;

				@include utils.breakpoint-up('md') {
					font-size: var(--font-size-1);
				}
			}

			&--text {
				font-size: var(--font-size-0);
				color: var(--text2);
				opacity: 0.7;
				width: 100%;
				text-align: center;

				@include utils.breakpoint-up('md') {
					font-size: calc(var(--font-size-1) * 0.9);
				}
			}

			& > p:first-of-type {
				margin-top: var(--size-2);
			}
		}
	}

	.external-link {
		color: var(--brand-accent) !important;
		&:hover {
			opacity: 0.8;
		}
	}

	.link-inactive {
		position: relative;
		display: inline-block;
		color: var(--brand-accent) !important;

		&:hover {
			opacity: 0.9;
		}

		&::after {
			content: '';
			position: absolute;
			left: 0;
			width: 100%;
			height: 2px;
			background-color: var(--brand-accent);
			transform: scaleX(0);
			transition: transform 0.25s ease-in-out;
			bottom: -2px;
			transform-origin: left;
		}

		&:hover::after {
			transform: scaleX(1);
		}
	}

	.link-active {
		background-color: var(--surface3);
		padding: 0 var(--size-2);
		border-radius: var(--radius-1);
	}
</style>

<footer class="footer">
	<div class="footer__container">
		<nav class="footer__container--navLinks">
			{
				navLinks.map((link) => {
					return (
						<a
							href={link.href}
							class={clsx({
								'link-inactive': pathname !== link.href,
								'link-active': pathname === link.href,
							})}
						>
							{link.label}
						</a>
					);
				})
			}
		</nav>

		<SocialLinks size="small" />
		<p class="footer__container--text">
			&copy; Copyright {new Date().getFullYear()} by Sergio Barria
		</p>
		<p class="footer__container--text">
			Built with {' '}
			<a
				href="https://astro.build/"
				target="_blank"
				rel="noopener noreferrer"
				class="external-link"
			>
				Astro.</a
			>
			<span>Content with</span>
			<a href="https://mdxjs.com/" target="_blank" rel="noopener noreferrer" class="external-link">
				MDX</a
			>
		</p>
	</div>
</footer>
