---
import clsx from 'clsx';
import SocialLinks from '~/shared/components/SocialLinks.astro';

import { navLinks } from '../../../site.json';

const pathname = new URL(Astro.request.url).pathname;
---

<style lang="scss">
	.footer {
		margin-top: auto;

		&__container {
			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: center;
			padding: var(--size-4) 0;
			border: solid var(--border-size-1) var(--border-color);

			&-navLinks {
				display: flex;
				gap: var(--size-4);
				font-size: var(--font-size-0);
				color: var(--brand);
				list-style: none;
				padding: var(--size-1) 0;
				color: var(--brand);

				& > li {
					&:hover {
						opacity: 0.8;
					}
				}
			}
		}

		&__text {
			font-size: var(--font-size-0);
			color: var(--text2);

			& > a {
				color: var(--brand);

				&:hover {
					opacity: 0.8;
				}
			}
		}
	}

	.link-inactive {
		position: relative;
		display: inline-block;
		color: var(--brand);

		&:hover {
			opacity: 0.9;
		}

		&::after {
			content: '';
			position: absolute;
			left: 0;
			width: 100%;
			height: 2px;
			background-color: var(--brand);
			transform: scaleX(0);
			transition: transform 0.25s ease-in-out;
			bottom: -2px;
			transform-origin: left;
		}

		&:hover::after {
			transform: scaleX(1);
		}
	}

	.link-active {
		background-color: var(--surface3);
		padding: 0 var(--size-1);
		border-radius: var(--radius-1);
	}
</style>

<footer class="footer">
	<div class="footer__container">
		<nav class="footer__container-navLinks">
			{
				navLinks.map((link) => {
					return (
						<a
							href={link.href}
							class={clsx({
								'link-inactive': pathname !== link.href,
								'link-active': pathname === link.href,
							})}
						>
							{link.label}
						</a>
					);
				})
			}
		</nav>

		<SocialLinks size="small" />
		<p class="footer__text">&copy; Copyright {new Date().getFullYear()} by Sergio Barria</p>
		<p class="footer__text">
			Built with {' '}
			<a href="https://astro.build/" target="_blank" rel="noopener noreferrer"> Astro.</a>
			<span>Content with</span>
			<a href="https://mdxjs.com/" target="_blank" rel="noopener noreferrer"> MDX</a>
		</p>
	</div>
</footer>
